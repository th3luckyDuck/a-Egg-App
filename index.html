<!DOCTYPE html>
<!--
<a-Egg-App v="1.0"
Contributors="Ducky; Brian;"
Debuging="Beng; Evildoer; Rella;"
/>
-->

<html>
<head>

  <meta charset="utf-8">
  <title>a-Egg-App</title>
  <meta name="a-Egg-App" content="a-Egg-App">
  <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
  <script src="js/altspace.js"></script>
  <script src="cached-model.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
  <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
  <script type="text/babel" data-presets="react, es2015" src="js/scoreboard.js"></script>
  <script>
    AFRAME.registerComponent('collapse-model', {
      init: function () {
        this.el.addEventListener('model-loaded', function () {
          this.el.setObject3D('mesh', this.el.object3DMap.mesh.children[0]);
          this.el.emit('object3dset', {type: 'mesh'});
        }.bind(this));
      }
    });
  </script>

</head>
<body>

  <!-- Create the Scene -->

<a-scene altspace="verticalAlign: middle; fullspace: true" vr-mode-ui="enabled: false" sync-system="author: Ducky; app: egg">

  <!-- Asset Loading -->

  <a-assets>

    <!-- Loading OBJ Models to Asset Manager -->

    <a-asset-item id="earsb-mtl" src="earsb.mtl"></a-asset-item>
    <a-asset-item id="earsb-obj" src="earsb.obj"></a-asset-item>
    <a-asset-item id="suitb-mtl" src="tail.mtl"></a-asset-item>
    <a-asset-item id="suitb-obj" src="tail.obj"></a-asset-item>
    <a-asset-item id="earsp-mtl" src="earsp.mtl"></a-asset-item>
    <a-asset-item id="earsp-obj" src="earsp.obj"></a-asset-item>
    <a-asset-item id="suitp-mtl" src="duck.mtl"></a-asset-item>
    <a-asset-item id="suitp-obj" src="duck.obj"></a-asset-item>

    <a-asset-item id="basket-mtl" src="basket.mtl"></a-asset-item>
    <a-asset-item id="basket-obj" src="basket.obj"></a-asset-item>
    <a-asset-item id="carrot-mtl" src="carrot.mtl"></a-asset-item>
    <a-asset-item id="carrot-obj" src="carrot.obj"></a-asset-item>
    <a-asset-item id="golden-egg-mtl" src="egg.mtl"></a-asset-item>
    <a-asset-item id="egg-mtl" src="egg.mtl"></a-asset-item>
    <a-asset-item id="egg-obj" src="egg.obj"></a-asset-item>

    <a-asset-item id="billboard-mtl" src="billboard.mtl"></a-asset-item>
    <a-asset-item id="billboard-obj" src="billboard.obj"></a-asset-item>

    <!-- Loading Images to Asset Manager -->

    <img id="earsb-icon" src="earsb-icon.jpg"/>
    <img id="suitb-icon" src="tail-icon.jpg"/>
    <img id="earsp-icon" src="earsp-icon.jpg"/>
    <img id="suitp-icon" src="duck-icon.jpg"/>
    <img id="carrot-icon" src="carrot-icon.jpg"/>
    <img id="basket-icon" src="basket-icon.jpg"/>
    <img id="egg-icon" src="egg-icon.jpg"/>
    <img id="egg1" src="egg1.1024x512.jpg"/>
    <img id="collected" src="collected.jpg"/>
    <img id="rules" src="rules.jpg"/>

    <!-- Adding Mixins to the Asset Manager -->

    <a-mixin id="earsb" obj-model="obj: #earsb-obj; mtl: #earsb-mtl" collapse-model scale="1.1 1.1 1.1"></a-mixin>

    <a-mixin id="earsb-head" rotation="0 180 0" n-skeleton-parent="part: head;" position="0 0.06 0" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="suitb" obj-model="obj: #suitb-obj; mtl: #suitb-mtl" collapse-model scale="0.3 0.3 0.3"></a-mixin>

    <a-mixin id="suitb-spine" rotation="0 180 0" n-skeleton-parent="part: spine;" position="0 -0.15 0.05" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="earsp" obj-model="obj: #earsp-obj; mtl: #earsp-mtl" collapse-model scale="1.1 1.1 1.1"></a-mixin>

    <a-mixin id="earsp-head" rotation="0 180 0" n-skeleton-parent="part: head;" position="0 0.06 0" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="suitp" obj-model="obj: #suitp-obj; mtl: #suitp-mtl" collapse-model scale="1 1 1"></a-mixin>

    <a-mixin id="suitp-spine" rotation="0 -90 0" n-skeleton-parent="part: spine;" position="0 -0.4 -0.05" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="carrot" obj-model="obj: #carrot-obj; mtl: #carrot-mtl" collapse-model scale="65 65 65"></a-mixin>

    <a-mixin id="carrot-hand" rotation="0 90 0" n-skeleton-parent="part: hand; side: right; index: 0" position="-0.03 -0.03 -0.075" sync sync-n-skeleton-parent></a-mixin>


    <a-mixin id="basket" obj-model="obj: #basket-obj; mtl: #basket-mtl" collapse-model scale="50 50 50"></a-mixin>

    <a-mixin id="basket-hand" rotation="-90 180 0" n-skeleton-parent="part: hand; side: left; index: 0" position="0 -0.03 -0.5" sync sync-n-skeleton-parent></a-mixin>


    <a-mixin id="egg" obj-model="obj: #egg-obj; mtl: #egg-mtl" collapse-model scale="0.05 0.05 0.05"></a-mixin>

    <a-mixin id="golden-egg" obj-model="obj: #egg-obj; mtl: #golden-egg-mtl" collapse-model scale="0.5 0.5 0.5"></a-mixin>

    <a-mixin id="egg-hand" rotation="0 180 90" n-skeleton-parent="part: hand; side: right; index: 0" position="-0.035 -0.04 -0.08" sync sync-n-skeleton-parent></a-mixin>

  </a-assets>

  <!-- Loading the Scoreboard -->
  <a-entity id="scoreboard" sync scoreboard="on: eggc; filter: a-animation; max: 300"></a-entity>

  <cached-obj-model scale="1.5 1.5 1.5" src="#billboard-obj" mtl="#billboard-mtl" position="3 -3.5 -10" rotation="0 105 0"></cached-obj-model>
  <a-entity n-text='text: The Altspace Egg Hunt' scale="0.5 0.5 0.5" position="3 1 -9.9" rotation="0 15 0"></a-entity>
  <a-entity n-text='text: -Leaderboard-' scale="0.25 0.25 0.25" position="1.7 0.5 -9.55" rotation="0 15 0"></a-entity>
  <a-entity id="ruleb" geometry="primitive: plane" material="src: #rules" position="4 -1 -10.15" scale="2.5 2.5 2.5" rotation="0 15 0"></a-entity>

  <!-- Attaching Background Image for Cockpit Egg Count -->

  <a-entity id="eggcountb" geometry="primitive: plane" material="src: #collected" position='-0.91 0.405 -1.76' rotation="-25 0 0" scale="0.375 0.175 0.03" n-cockpit-parent></a-entity>

  <!-- Attaching Instantiator Buttons to the Cockpit -->
  <a-entity id="earsb-head-instantiator" geometry="primitive: box" material="src: #earsb-icon" position='-0.81 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: headg; mixin: earsb earsb-head;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="suitb-spine-instantiator" geometry="primitive: box" material="src: #suitb-icon" position='-01.01 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: spineg; mixin: suitb suitb-spine;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="earsp-head-instantiator" geometry="primitive: box" material="src: #earsp-icon" position='-0.81 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: headg; mixin: earsp earsp-head;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="suitp-spine-instantiator" geometry="primitive: box" material="src: #suitp-icon" position='-01.01 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: spineg; mixin: suitp suitp-spine;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="carrot-hand-instantiator" geometry="primitive: box" material="src: #carrot-icon" position='-0.61 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handr; mixin: carrot carrot-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="egg-hand-instantiator" geometry="primitive: box" material="src: #egg-icon" position='-0.61 0.405 -1.75' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handr; mixin: egg egg-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="basket-hand-instantiator" geometry="primitive: box" material="src: #basket-icon" position='-0.61 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handl; mixin: basket basket-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <!-- Placing Eggs in Scene -->

  <cached-obj-model id="egg1" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="4.34 -3.88 -2.25" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg1a;">
    <a-animation id="egg1a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg2" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="6.9 -3.85 0.42" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg2a;">
    <a-animation id="egg2a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg3" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="4.37 -4.71 8.74" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg3a;">
    <a-animation id="egg3a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg4" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="-9.74 -3.51 -7.11" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg4a;">
    <a-animation id="egg4a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg5" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="-3.12 -3.43 -14.78" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg5a;">
    <a-animation id="egg5a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg6" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="-0.59 -3.26 -18.63" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg6a;">
    <a-animation id="egg6a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg7" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="8.43 -3.29 -28.86" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg7a;">
    <a-animation id="egg7a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg8" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="7.41 -3.53 -36.25" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg8a;">
    <a-animation id="egg8a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg9" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="-2.57 -4.31 -34.78" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg9a;">
    <a-animation id="egg9a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg10" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="22.52 -3.53 -20.28" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg10a;">
    <a-animation id="egg10a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg11" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="28.84 -0.26 -18.03" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg11a;">
    <a-animation id="egg11a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg12" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="26.12 -3.45 -11.52" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg12a;">
    <a-animation id="egg12a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg13" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="25.18 -2.3 -6.2" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg13a;">
    <a-animation id="egg13a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg14" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="27.05 0.52 -0.58" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg14a;">
    <a-animation id="egg14a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg16" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="19.44 0.35 8.56" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg16a;">
    <a-animation id="egg16a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg17" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="21.64 -1.02 12.8" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg17a;">
    <a-animation id="egg17a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg18" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="28 -1.29 15.75" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg18a;">
    <a-animation id="egg18a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg19" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="35.23 2.06 31.06" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg19a;">
    <a-animation id="egg19a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg20" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="32.08 1.43 35.38" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg20a;">
    <a-animation id="egg20a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg21" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="26.23 0.72 28.52" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg21a;">
    <a-animation id="egg21a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg22" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="5.53 -2.48 4.1" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg22a;">
    <a-animation id="egg22a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg23" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="-21.32 -12.56 1.54" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg23a;">
    <a-animation id="egg23a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg24" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="24.49 3.83 12.66" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg24a;">
    <a-animation id="egg24a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>
  <cached-obj-model id="egg25" scale="0.05 0.05 0.05" src="#egg-obj" mtl="#egg-mtl" position="0.13 -3.72 -7.61" rotation="0 0 0" wire="on: click; emit: eggc; targets: #egg1s, #egg25a;">
    <a-animation id="egg25a" attribute="position" begin="on: eggc" dur="100000" easing="linear" repeat="0" fill="backwards" to="0 -1000 0"></a-animation>
  </cached-obj-model>

  <!-- Defining Sound Effects for Eggs and Buttons -->

  <a-entity id="egg1s" position="0 0 0" n-sound="src: coin1.wav; on: eggc; minDistance: 1000; maxDistance: 3000" n-skeleton-parent="part: spine;"></a-entity>
  <a-entity id="b1s" position="0 0 0" n-sound="src: b1.wav; volume: 0.2; on: b1; minDistance: 1000; maxDistance: 3000" n-skeleton-parent="part: spine;"></a-entity>


</a-scene>
</body>
</html>
